% ОБЯЗАТЕЛЬНО ИМЕННО ТАКОЙ documentclass!
% (Основной кегль = 14pt, поэтому необходим extsizes)
% Формат, разумеется, А4
% article потому что стандарт не подразумевает разделов
% Глава = section, Параграф = subsection
% (понятия "глава" и "параграф" из документа, описывающего диплом)
\documentclass[a4paper,article,14pt]{extarticle}

% Подключаем главный пакет со всем необходимым
\usepackage{spbudiploma_tempora}

% Пакеты по желанию (самые распространенные)
% Хитрые мат. символы
\usepackage{euscript}
% Таблицы
\usepackage{longtable}
\usepackage{makecell}
% Картинки (можно встявлять даже pdf)
\usepackage[pdftex]{graphicx}

\usepackage{amsthm,amssymb, amsmath}
\usepackage{textcomp}

\begin{document}

% Титульник в файле titlepage.tex
%\input{titlepage.tex}

% Содержание
\tableofcontents
\pagebreak

\specialsection{Введение}

В настоящее время обучение языку ассемблера является важной составляющей многих программистских курсов.

Очень часто студенты, изучающие язык ассемблера, сталкиваются с проблемами при настройки среды разработки, при использовании инструментов компиляции и отладки.

Преподаватели таких курсов также сталкиваются с проблемами организации учебного процесса.

Создание удобного, интерактивного и производительного программного инструмента удалённой сборки и отладки програм на ассемблере, представляет собой актуальную задачу.

\textbf{Цель данной работы} состоит в разработке и инструмент удалённого запуска, отладки и проверки программ на языке ассемблера, удовлетворяющий следующим свойствам:

\begin{enumerate}
    \item Не ожидает, что студент хорошо разбирается в инструментах компиляции, отладки, не требует опыта работы с командной строкой;
    \item Минимизирует количество элементарных шагов, требуемых для запуска программ;
    \item Не требует установки дополнительного ПО на устройстве студента;
\end{enumerate}

\textbf{Задачи данной работы}:

\begin{enumerate}
    \item Исследование существующих решений для запуска и отладки программ на языке ассемблера, а также решений для обучения языку ассемблера;
    \item Формирование требований к разрабатываемому инструменту;
    \item Исследование возможности создания инструмента;
    \item Разработка программной архитектуры инструмента;
    \item Реализация инструмента;
\end{enumerate}

\textbf{Объектом исследования} являются системы запуска и отладки программ на языке ассемблера.

\textbf{Предметом исследования} является интерактивность и удобство использования таких систем.

\textbf{Практическая ценность работы} состоит в том, что разработанный инструмент позволит проводить обучение языку ассемблера более эффективно для студентов.

\section{Обзор существующих решений}
\subsection{Критерии сравнения}

Смотрим на следующие критерии:

\begin{enumerate}
    \item Поддержка запуска ассемблерного кода на разных диалектах и на разных архитектурах;
    \item Поддержка отладки: выполнение по шагам, поддержка точек останова, редактирования регистров/памяти, визуализация стека вызовов;
    \item Поддержка задач и их автоматической проверки;
    \item Поддержка интеграции с системами управления обучением;
    \item Возможность работы без установки дополнительного программного обеспечения на устройстве пользователя;
    \item Возможность самостоятельной установки и развёртывания системы на выделенном сервере, доступность исходного кода;
\end{enumerate}

\subsection{Существующие решения}
\subsubsection{Ideone}

Ideone является онлайн компилятором и средой разработки, поддерживающей более 60 языков программирования, в том числе несколько диалектов ассемблера. Система доступна по адресу \url{https://ideone.com}.

Поддерживается запуск ассемблерного кода на архитектурах x86 (NASM и GNU диалекты) и x86-64 (только NASM диалект). Отладка не поддерживается.

Поддержки задач, их автоматической проверки нет, соответственно нет и интеграции в системы управления обучением.

Взаимодействие с системой происходит через веб-интерфейс, установки допольнительного ПО не требуется.

Система имеет закрытый исходный код, самостоятельно установить систему на выделенный сервер не представляется возможным.

\subsubsection{OneCompiler}

Примерно то же самое, что и Ideone, правда поддерживает только x86 с NASM диалектом. Система доступна по адресу \url{https://onecompiler.com/assembly}. Не уверен, нужно ли включать в список аналогов, или же хватит Ideone.

\subsubsection{ASM Debugger}

ASM Debugger является инструментом для пошаговой отладки простых программ на языке ассемблера. Инструмент доступен по адресу \url{http://asmdebugger.com}.

Особенностью инструмента является то, что он не использует запуск программ на реальном аппаратном обеспечении. Вместо этого, на языке Javascript реализовано подмножество инструкций x86 ассемблера.

Поддерживается запуск ассемблерного кода на архитектуре x86 с NASM диалектом. Поддерживается пошаговое исполнение, просмотр значений регистров.

Поддержки задач, их автоматической проверки нет, соответственно нет и интеграции в системы управления обучением.

Взаимодействие с инструменетом происходит через веб-интерфейс, установки допольнительного ПО не требуется.

Инструмент имеет открытый исходный код, доступный по адресу \url{https://github.com/dinoqqq/asmdebugger}. Соответственно, есть возможность установить его на выделенный сервер.

\subsubsection{SASM (SimpleASM)}

SASM представляет из себя кроссплатформенную среду разработки на языке ассемблера для архитектур x86 и x86-64 с использованием диалектов NASM, GNU, FASM, MASM. Инструмент доступен по адресу \url{https://dman95.github.io/SASM/index.html}.

Поддерживается запуск ассемблерного кода, поддерживается выполнение по шагам, точки останова, просмотр и редактирование регистров и памяти, а также произвольные команды GDB.

Поддержки задач, их автоматической проверки нет, соответственно нет и интеграции в системы управления обучением.

Для использования инструмента необходима его установка на компьютер пользователя. Исходный код инструмента доступен по адресу \url{https://github.com/Dman95/SASM}.

\subsubsection{JetBrains Clion + EduTools}

Clion~--- это интегрированная среда разработки от компании JetBrains, предназначенная, в первую очередь, для разработки приложений на языках C и C++. Язык ассемблера не поддерживается ни в каком виде, но существуют сторонние плагины, которые решают эту проблему. Здесь я рассмотрю самый популярный такой плагин, он доступен по адресу \url{https://plugins.jetbrains.com/plugin/9759-nasm-assembly-language}.

Компиляция и запуск кода на языке ассемблера возможны, если модифицировать должным образом файлы системы описания сборки CMake. Отладка ассемблерного кода не поддерживается.

Плагин EduTools позволяет создавать и писать задачи с автоматическими тестами, что упрощает проверку решений. Отсутствует поддержка задач с закрытыми (недоступными для обучающегося) тестами. Интеграция с системами управления обучением отсутствует.

Для использования данной среды разработки необходима её установка на компьютер пользователя. Она имеет закрытый исходный код.

\subsubsection{GitHub Classroom + Visual Studio Code}

GitHub Classroom~--- это сервис, позволяющий давать учебные задания в виде git-репозиториев. GitHub Classroom позволяет добавить кнопку <<открыть в Visual Studio Code>>, которая позволяет открыть репозиторий с преднастроенными плагинами в этом редакторе.

Для того, чтобы настроить поддержку языка ассемблера в Visual Studio Code, требуется установка дополнительных плагинов. Также преподавателю в шаблонном репозитории необходимо будет настроить компиляцию и запуск в файлах \texttt{tasks.json} и \texttt{launch.json}. Отладка не поддерживается.

GitHub Classroom позволяет добавлять тесты через веб-интерфейс преподавателя. В качестве теста может выступать набор входных данных и эталонных ответов к ним, так и путь до скрипта для автоматической проверки. В первом случае входные данные передаются программе через стандартный поток ввода, а вывод программы сравнивается с эталонным ответом.

Необходима установка Visual Studio Code, компилятора и отладчика.

GitHub Classroom имеет закрытый исходный код, установить свою копию на выделенный сервер не представляется возможным.

\subsubsection{Stepik}

В системе управления обучением Stepik есть режим задания Code Challenge, который позволяет проверять код, написанный на разных языках программирования.

Поддерживается NASM диалект x86 и x86-64 ассемблера. Отладка не поддерживается.

Поддерживаются задачи и их автоматическая проверка на скрытых тестах. Тесты должны иметь вид набора входных данных и эталонных ответов. Входные данные передаются программе через стандартный поток ввода, а вывод программы сравнивается с эталонным ответом.

взаимодействие с системой происходит через веб-интерфейс, установка дополнительного ПО не требуется. Система имеет закрытый исходный код.

\subsubsection{Moodle + Virtual Programming Lab}

\subsubsection{Git репозиторий с заданиями и скриптами для проверки}

\subsection{Сравнение существующих решений}

Тут табличка с ранее описанными критериями сравнения.

\subsection{Формирование требований к разрабатываемому инструменту}

\section{Исследование возможности создания инструмента}

\subsection{Компиляция ассемблерных программ}

\subsubsection{Использование компилятора GCC}

Ну да, используем GCC, что тут ещё можно сказать.

\subsubsection{Использование ассемблера YASM}

Необходимо сказать, что в YASM нет альтернативы директиве \texttt{\#line}, из-за чего при добавлении префикса/суффикса к коду строчки становятся непонятными.

\subsection{Запуск ассемблерных программ}

\subsubsection{Изоляция с помощью seccomp}

Seccomp~--- механизм ядра Linux, позволяющий процессу перейти в <<безопасный режим>>, в котором запрещены все системные вызовы, кроме \texttt{exit}, \texttt{sigreturn}, \texttt{read} и \texttt{write}.

Мы просто хотим мувать регистры туда-сюда, зачем нам системные вызовы?

\subsubsection{Ограничение потребляемых ресурсов с помощью prlimit}

Ограничиваем процессорное время в секундах через \texttt{RLIM\_CPU}.

\subsubsection{Ограничение потребляемых ресурсов с помощью Docker}

Docker (через механизм контрольных групп) позволяет ограничивать использование процессорного времени, используемую память в контейнерах.

\subsection{Отладка ассемблерных программ}

\subsubsection{Использование GDB}

GDB~--- консольный инструмент отладки программ. Позволяет отлаживать программы на самых разных языках программирования на разных платформах. Поддерживает отладочную информацию в формате DWARF.

\subsubsection{GDB/MI}

GDB/MI (GDB Machine Interface, машинный интерфейс GDB) позволяет взаимодействовать с процессом отладки в машиночитаемом виде. Это нам пригодится.

Тут можно вкратце описать формат взаимодействия, поставить референс на мануал GDB/MI.

\subsubsection{GDB server}

GDB server~--- программа, с которой GDB может взаимодействовать, чтобы организовать отладку кода на удалённой машине. Пригодится для разделения полномочий и ограничения ресурсов.

\subsection{Выводы}

Пишем выводы.

% Библиография в cpsconf стиле
% Аргумент {1} ниже включает переопределенный стиль с выравниванием слева
% \begin{thebibliography}{1}
% \bibitem{voc} Griffin D.W., Lim J.S. \flqq Multiband excitation vocoder\frqq. IEEE ASSP-36 (8), 1988, pp. 1223-1235.
% \bibitem{vo2} Griffin D.W., Lim J.S. \flqq Multiband excitation vocoder\frqq. IEEE ASSP-36 (8), 1988, pp. 1223-1235.
% \end{thebibliography}
\end{document}
